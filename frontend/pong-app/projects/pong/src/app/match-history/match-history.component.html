<div class="match-history">
    <h2>Match History for {{ currentUsername }}</h2>
    <div class="matches-container">
        <div *ngIf="matches.length === 0" class="empty-message" i18n>
            No matches played yet
        </div>
        <div *ngFor="let match of matches" class="match-card">
            <div class="match-header">
                <span class="match-date">{{ match.match_date | date:'medium' }}</span>
                <span class="match-type">{{ match.match_type }}</span>
            </div>
            
            <div class="match-details" [ngClass]="{'multiplayer': match.match_type === 'multiplayer'}">
                <!-- Regular 1v1 match -->
                <ng-container *ngIf="match.match_type !== 'multiplayer'">
                    <div class="player" [class.winner]="match.player1_username === match.winner_username">
                        {{ match.player1_username }}: {{ match.player1_score }}
                    </div>
                    <div class="vs">vs</div>
                    <div class="player" [class.winner]="match.player2_username === match.winner_username">
                        {{ match.player2_username }}: {{ match.player2_score }}
                    </div>
                </ng-container>

                <!-- 4-player match -->
                <ng-container *ngIf="match.match_type === 'multiplayer'">
                    <div class="multiplayer-grid">
                        <div class="player" [class.winner]="match.player1_username === match.winner_username">
                            {{ match.player1_username }}: {{ match.player1_score }}
                        </div>
                        <div class="player" [class.winner]="match.player2_username === match.winner_username">
                            {{ match.player2_username }}: {{ match.player2_score }}
                        </div>
                        <div class="player" [class.winner]="match.player3_username === match.winner_username">
                            {{ match.player3_username }}: {{ match.player3_score }}
                        </div>
                        <div class="player" [class.winner]="match.player4_username === match.winner_username">
                            {{ match.player4_username }}: {{ match.player4_score }}
                        </div>
                    </div>
                </ng-container>
            </div>

            <div class="match-footer">
                Winner: {{ match.winner_username }}
            </div>
        </div>
    </div>
</div>
